---
source: crates/analyzer/tests/analysis.rs
expression: "build_snapshot(\"features/revert.fe\", &src, &context)"

---
ModuleAttributes {
    type_defs: {
        "Error": Struct(
            Struct {
                name: "Error",
                fields: [
                    (
                        "msg",
                        Base(
                            Numeric(
                                U256,
                            ),
                        ),
                    ),
                    (
                        "val",
                        Base(
                            Bool,
                        ),
                    ),
                ],
            },
        ),
        "Foo": Contract(
            Contract {
                name: "Foo",
                functions: [
                    FunctionAttributes {
                        is_public: true,
                        name: "bar",
                        params: [],
                        return_type: Base(
                            Numeric(
                                U256,
                            ),
                        ),
                    },
                    FunctionAttributes {
                        is_public: true,
                        name: "revert_custom_error",
                        params: [],
                        return_type: Base(
                            Unit,
                        ),
                    },
                    FunctionAttributes {
                        is_public: true,
                        name: "revert_other_error",
                        params: [],
                        return_type: Base(
                            Unit,
                        ),
                    },
                    FunctionAttributes {
                        is_public: true,
                        name: "revert_other_error_from_sto",
                        params: [],
                        return_type: Base(
                            Unit,
                        ),
                    },
                ],
            },
        ),
        "OtherError": Struct(
            Struct {
                name: "OtherError",
                fields: [
                    (
                        "msg",
                        Base(
                            Numeric(
                                U256,
                            ),
                        ),
                    ),
                    (
                        "val",
                        Base(
                            Bool,
                        ),
                    ),
                ],
            },
        ),
    },
}

note: 
   ┌─ features/revert.fe:16:26
   │
16 │         revert Error(msg=1, val=true)
   │                          ^ attributes hash: 1230752710897721197
   │
   = ExpressionAttributes {
         typ: Base(
             Numeric(
                 U256,
             ),
         ),
         location: Value,
         move_location: None,
     }

note: 
   ┌─ features/revert.fe:16:33
   │
16 │         revert Error(msg=1, val=true)
   │                                 ^^^^ attributes hash: 519621297275845584
   │
   = ExpressionAttributes {
         typ: Base(
             Bool,
         ),
         location: Value,
         move_location: None,
     }

note: 
   ┌─ features/revert.fe:16:16
   │
16 │         revert Error(msg=1, val=true)
   │                ^^^^^^^^^^^^^^^^^^^^^^ attributes hash: 11694781548607974207
   │
   = ExpressionAttributes {
         typ: Struct(
             Struct {
                 name: "Error",
                 fields: [
                     (
                         "msg",
                         Base(
                             Numeric(
                                 U256,
                             ),
                         ),
                     ),
                     (
                         "val",
                         Base(
                             Bool,
                         ),
                     ),
                 ],
             },
         ),
         location: Memory,
         move_location: None,
     }

note: 
   ┌─ features/revert.fe:19:31
   │
19 │         revert OtherError(msg=1, val=true)
   │                               ^ attributes hash: 1230752710897721197
   │
   = ExpressionAttributes {
         typ: Base(
             Numeric(
                 U256,
             ),
         ),
         location: Value,
         move_location: None,
     }

note: 
   ┌─ features/revert.fe:19:38
   │
19 │         revert OtherError(msg=1, val=true)
   │                                      ^^^^ attributes hash: 519621297275845584
   │
   = ExpressionAttributes {
         typ: Base(
             Bool,
         ),
         location: Value,
         move_location: None,
     }

note: 
   ┌─ features/revert.fe:19:16
   │
19 │         revert OtherError(msg=1, val=true)
   │                ^^^^^^^^^^^^^^^^^^^^^^^^^^^ attributes hash: 6207322651044042545
   │
   = ExpressionAttributes {
         typ: Struct(
             Struct {
                 name: "OtherError",
                 fields: [
                     (
                         "msg",
                         Base(
                             Numeric(
                                 U256,
                             ),
                         ),
                     ),
                     (
                         "val",
                         Base(
                             Bool,
                         ),
                     ),
                 ],
             },
         ),
         location: Memory,
         move_location: None,
     }

note: 
   ┌─ features/revert.fe:22:9
   │
22 │         self.my_other_error = OtherError(msg=1, val=true)
   │         ^^^^^^^^^^^^^^^^^^^ attributes hash: 1455945768619151908
   │
   = ExpressionAttributes {
         typ: Struct(
             Struct {
                 name: "OtherError",
                 fields: [
                     (
                         "msg",
                         Base(
                             Numeric(
                                 U256,
                             ),
                         ),
                     ),
                     (
                         "val",
                         Base(
                             Bool,
                         ),
                     ),
                 ],
             },
         ),
         location: Storage {
             nonce: Some(
                 0,
             ),
         },
         move_location: None,
     }

note: 
   ┌─ features/revert.fe:22:46
   │
22 │         self.my_other_error = OtherError(msg=1, val=true)
   │                                              ^ attributes hash: 1230752710897721197
   │
   = ExpressionAttributes {
         typ: Base(
             Numeric(
                 U256,
             ),
         ),
         location: Value,
         move_location: None,
     }

note: 
   ┌─ features/revert.fe:22:53
   │
22 │         self.my_other_error = OtherError(msg=1, val=true)
   │                                                     ^^^^ attributes hash: 519621297275845584
   │
   = ExpressionAttributes {
         typ: Base(
             Bool,
         ),
         location: Value,
         move_location: None,
     }

note: 
   ┌─ features/revert.fe:22:31
   │
22 │         self.my_other_error = OtherError(msg=1, val=true)
   │                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^ attributes hash: 6207322651044042545
   │
   = ExpressionAttributes {
         typ: Struct(
             Struct {
                 name: "OtherError",
                 fields: [
                     (
                         "msg",
                         Base(
                             Numeric(
                                 U256,
                             ),
                         ),
                     ),
                     (
                         "val",
                         Base(
                             Bool,
                         ),
                     ),
                 ],
             },
         ),
         location: Memory,
         move_location: None,
     }

note: 
   ┌─ features/revert.fe:23:16
   │
23 │         revert self.my_other_error.to_mem()
   │                ^^^^^^^^^^^^^^^^^^^ attributes hash: 1455945768619151908
   │
   = ExpressionAttributes {
         typ: Struct(
             Struct {
                 name: "OtherError",
                 fields: [
                     (
                         "msg",
                         Base(
                             Numeric(
                                 U256,
                             ),
                         ),
                     ),
                     (
                         "val",
                         Base(
                             Bool,
                         ),
                     ),
                 ],
             },
         ),
         location: Storage {
             nonce: Some(
                 0,
             ),
         },
         move_location: None,
     }

note: 
   ┌─ features/revert.fe:23:16
   │
23 │         revert self.my_other_error.to_mem()
   │                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ attributes hash: 4295708869972799250
   │
   = ExpressionAttributes {
         typ: Struct(
             Struct {
                 name: "OtherError",
                 fields: [
                     (
                         "msg",
                         Base(
                             Numeric(
                                 U256,
                             ),
                         ),
                     ),
                     (
                         "val",
                         Base(
                             Bool,
                         ),
                     ),
                 ],
             },
         ),
         location: Storage {
             nonce: Some(
                 0,
             ),
         },
         move_location: Some(
             Memory,
         ),
     }

note: 
   ┌─ features/revert.fe:12:5
   │  
12 │ ╭     pub def bar() -> u256:
13 │ │         revert
   │ ╰──────────────^ attributes hash: 5931278080780939395
   │  
   = FunctionAttributes {
         is_public: true,
         name: "bar",
         params: [],
         return_type: Base(
             Numeric(
                 U256,
             ),
         ),
     }

note: 
   ┌─ features/revert.fe:15:5
   │  
15 │ ╭     pub def revert_custom_error():
16 │ │         revert Error(msg=1, val=true)
   │ ╰─────────────────────────────────────^ attributes hash: 8604546375909025578
   │  
   = FunctionAttributes {
         is_public: true,
         name: "revert_custom_error",
         params: [],
         return_type: Base(
             Unit,
         ),
     }

note: 
   ┌─ features/revert.fe:18:5
   │  
18 │ ╭     pub def revert_other_error():
19 │ │         revert OtherError(msg=1, val=true)
   │ ╰──────────────────────────────────────────^ attributes hash: 13536596200836451553
   │  
   = FunctionAttributes {
         is_public: true,
         name: "revert_other_error",
         params: [],
         return_type: Base(
             Unit,
         ),
     }

note: 
   ┌─ features/revert.fe:21:5
   │  
21 │ ╭     pub def revert_other_error_from_sto():
22 │ │         self.my_other_error = OtherError(msg=1, val=true)
23 │ │         revert self.my_other_error.to_mem()
   │ ╰───────────────────────────────────────────^ attributes hash: 10600311300800311694
   │  
   = FunctionAttributes {
         is_public: true,
         name: "revert_other_error_from_sto",
         params: [],
         return_type: Base(
             Unit,
         ),
     }

note: 
   ┌─ features/revert.fe:9:1
   │  
 9 │ ╭ contract Foo:
10 │ │     my_other_error: OtherError
11 │ │ 
12 │ │     pub def bar() -> u256:
   · │
22 │ │         self.my_other_error = OtherError(msg=1, val=true)
23 │ │         revert self.my_other_error.to_mem()
   │ ╰───────────────────────────────────────────^ attributes hash: 15459304479214598396
   │  
   = ContractAttributes {
         public_functions: [
             FunctionAttributes {
                 is_public: true,
                 name: "bar",
                 params: [],
                 return_type: Base(
                     Numeric(
                         U256,
                     ),
                 ),
             },
             FunctionAttributes {
                 is_public: true,
                 name: "revert_custom_error",
                 params: [],
                 return_type: Base(
                     Unit,
                 ),
             },
             FunctionAttributes {
                 is_public: true,
                 name: "revert_other_error",
                 params: [],
                 return_type: Base(
                     Unit,
                 ),
             },
             FunctionAttributes {
                 is_public: true,
                 name: "revert_other_error_from_sto",
                 params: [],
                 return_type: Base(
                     Unit,
                 ),
             },
         ],
         init_function: None,
         events: [],
         structs: [
             Struct {
                 name: "Error",
                 fields: [
                     (
                         "msg",
                         Base(
                             Numeric(
                                 U256,
                             ),
                         ),
                     ),
                     (
                         "val",
                         Base(
                             Bool,
                         ),
                     ),
                 ],
             },
             Struct {
                 name: "OtherError",
                 fields: [
                     (
                         "msg",
                         Base(
                             Numeric(
                                 U256,
                             ),
                         ),
                     ),
                     (
                         "val",
                         Base(
                             Bool,
                         ),
                     ),
                 ],
             },
         ],
         external_contracts: [],
     }

note: 
   ┌─ features/revert.fe:16:16
   │
16 │         revert Error(msg=1, val=true)
   │                ^^^^^ attributes hash: 563910565138212793
   │
   = TypeConstructor {
         typ: Struct(
             Struct {
                 name: "Error",
                 fields: [
                     (
                         "msg",
                         Base(
                             Numeric(
                                 U256,
                             ),
                         ),
                     ),
                     (
                         "val",
                         Base(
                             Bool,
                         ),
                     ),
                 ],
             },
         ),
     }

note: 
   ┌─ features/revert.fe:19:16
   │
19 │         revert OtherError(msg=1, val=true)
   │                ^^^^^^^^^^ attributes hash: 371870897900126483
   │
   = TypeConstructor {
         typ: Struct(
             Struct {
                 name: "OtherError",
                 fields: [
                     (
                         "msg",
                         Base(
                             Numeric(
                                 U256,
                             ),
                         ),
                     ),
                     (
                         "val",
                         Base(
                             Bool,
                         ),
                     ),
                 ],
             },
         ),
     }

note: 
   ┌─ features/revert.fe:22:31
   │
22 │         self.my_other_error = OtherError(msg=1, val=true)
   │                               ^^^^^^^^^^ attributes hash: 371870897900126483
   │
   = TypeConstructor {
         typ: Struct(
             Struct {
                 name: "OtherError",
                 fields: [
                     (
                         "msg",
                         Base(
                             Numeric(
                                 U256,
                             ),
                         ),
                     ),
                     (
                         "val",
                         Base(
                             Bool,
                         ),
                     ),
                 ],
             },
         ),
     }

note: 
   ┌─ features/revert.fe:23:16
   │
23 │         revert self.my_other_error.to_mem()
   │                ^^^^^^^^^^^^^^^^^^^^^^^^^^ attributes hash: 15856680294290209687
   │
   = ValueAttribute

note: 
  ┌─ features/revert.fe:2:10
  │
2 │     msg: u256
  │          ^^^^ attributes hash: 4293763436908729629
  │
  = Base(
        Numeric(
            U256,
        ),
    )

note: 
  ┌─ features/revert.fe:3:10
  │
3 │     val: bool
  │          ^^^^ attributes hash: 5425972608982369985
  │
  = Base(
        Bool,
    )

note: 
  ┌─ features/revert.fe:6:10
  │
6 │     msg: u256
  │          ^^^^ attributes hash: 4293763436908729629
  │
  = Base(
        Numeric(
            U256,
        ),
    )

note: 
  ┌─ features/revert.fe:7:10
  │
7 │     val: bool
  │          ^^^^ attributes hash: 5425972608982369985
  │
  = Base(
        Bool,
    )

note: 
   ┌─ features/revert.fe:12:22
   │
12 │     pub def bar() -> u256:
   │                      ^^^^ attributes hash: 4293763436908729629
   │
   = Base(
         Numeric(
             U256,
         ),
     )

note: 
   ┌─ features/revert.fe:10:21
   │
10 │     my_other_error: OtherError
   │                     ^^^^^^^^^^ attributes hash: 11110528865914593659
   │
   = Struct(
         Struct {
             name: "OtherError",
             fields: [
                 (
                     "msg",
                     Base(
                         Numeric(
                             U256,
                         ),
                     ),
                 ),
                 (
                     "val",
                     Base(
                         Bool,
                     ),
                 ),
             ],
         },
     )


